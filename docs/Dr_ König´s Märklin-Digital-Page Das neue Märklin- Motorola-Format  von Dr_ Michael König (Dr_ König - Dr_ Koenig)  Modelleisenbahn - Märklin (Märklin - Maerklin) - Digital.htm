<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0050)http://home.arcor.de/dr.koenig/digital/motoueb.htm -->
<HTML><HEAD><TITLE>Dr. König´s Märklin-Digital-Page: Das neue Märklin- Motorola-Format | von Dr. Michael König (Dr. König - Dr. Koenig) | Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META content="MSHTML 6.00.2900.2523" name=GENERATOR></HEAD>
<BODY 
background="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/back3.gif"><!--hr--><FONT 
size=4>
<CENTER><IMG 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/bahn7.gif" 
align=middle border=0></CENTER><BR>
<CENTER>
<H3><IMG height=32 alt="Dr. König´s Märklin-Digital-Page" 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/mk2.gif" 
width=376></H3></CENTER>
<P>
<CENTER><IMG 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/bahn8.gif" 
border=0></CENTER><BR>
<CENTER>
<H2><FONT size=+3>Das neue Märklin-Motorola-Format </FONT></H2></CENTER>
<P>
<P><I>Dies ist die autorisierte deutsche Übersetzung Version 1.1/3.7 von</I> 
<P>
<HR>
<A href="http://spazioinwind.libero.it/scorzoni/motorola.htm">
<H2>
<CENTER>DIE BESCHREIBUNG DES </CENTER></H2>
<H2>
<CENTER>NEUEN MÄRKLIN-MOTOROLA-FORMATS</CENTER></H2></A>
<H4>
<CENTER>© Andrea Scorzoni, 1995-1999</CENTER></H4>
<HR>

<P><I>Es handelt sich vorliegend <B>nicht</B> um eine Bearbeitung; ich habe mich 
vielmehr um eine möglichst wörtliche Übersetzung bemüht und Stil pp. des 
Originals beibehalten. Ergänzungen und Anmerkungen, die mir wichtig erscheinen, 
habe ich daher in kursiver Schrift eingefügt (Anmerkung des Übersetzers).<BR>Ich 
danke <A href="mailto:RHeinz1964@aol.com">R. Heinzelmann</A> aus Ummendorf, <A 
href="mailto:A.Gross@sel.de">Andreas Groß</A> sowie <A 
href="mailto:Thomas_Reich@acwins.com">Thomas Reich</A> für 
Korrekturhinweise.</I> 
<P>
<H3><U>EINLEITUNG</U> </H3>
<P>Dies ist die Version 3.7 der Beschreibung des"neuen Motorola-Formats", das 
Märklin 1994 mit der Control Unit 6021 eingeführt hat. Wie Sie sehen werden, ist 
das neue Format nur noch teilweise mit dem normalen ternären <I>(Anmerkung des 
Übersetzers: Nach den jügnsten Sprachforschungen ist sowohl "ternär" als auch 
"trinär" für die Beschreibung dieser Dreiwertigkeit zulässig.)</I> 
Motorola-Format (145026- Format) identisch. Da eine Menge einschlägiger 
Literatur verfübar ist, wird das alte Format hier nicht mehr detailliert 
beschrieben.</P>
<P>Nachdem ich der Märklin-Export-Abteilung die erste Version dieser 
Beschreibung übersandt hatte, erhielt ich die Antwort, daß sie (offenbar bis 
heute) keine Zeit hätten, eine offizielle Beschreibung des neuen 
Märklin-Motorola-Formats zu veröffentlichen. Ich hoffe, daß diese Beschreibung 
beiden helfen wird - Ihnen, dem Leser, und den "Offiziellen" von Märklin.</P>
<P>Das hier beschriebene Format wurde eingehend überprüft und getestet.</P>
<P>Dennoch kann ich selbstverständlich keine Haftung bzw. Verantwortung für 
irgendwelche Schäden übernehmen, die durch die Benutzung der Informationen 
dieser Beschreibung entstehen könnten. <I>Dies gilt in gleicher Weise für den 
Übersetzer (Anmerkung des Übersetzers).</I> Schreibfehler und logische Irrtümer 
können nicht ausgeschlossen werden; bitte überprüfen Sie es. Ich erwarte Ihre 
Antwort und Kommentare.</P>
<P>Bei schriftlicher Verwertung dieser Informationen zitieren Sie diese Quelle 
bitte wie folgt:</P>
<P>Andrea Scorzoni, via Agucchi 169, 40131, Bologna, Italy. 
<P>e-mail (Büro): <STRONG><A 
href="mailto:scorzoni@diei.unipg.it">scorzoni@diei.unipg.it</A></STRONG> 
<P>Internet (Büro): <STRONG><A 
href="http://www.diei.unipg.it/STAFF/scorzoni.htm">http://www.diei.unipg.it/STAFF/scorzoni.htm</A></STRONG> 

<P><I>Deutsche Übersetzung von Dr. M. Michael König, Antoniter-Weg 11, 65843 
Sulzbach/Ts., Deutschland. 
<P>e-mail: <STRONG><A 
href="http://home.arcor.de/dr.koenig/digital/homepag.htm#kontakt">Kontakt</A></STRONG> 

<P>Internet: <STRONG><A 
href="http://www.drkoenig.de/">http://www.drkoenig.de/</A></STRONG></I> 
<P>Ich danke Stefano Chiti-Batelli vielmals für seine ausführlichen Tests und 
Überprüfungen des hier beschriebenen Formats. Auch die Unterstützung von Rob 
Hamerling war hilfreich beim besseren Verständnis des Datenstrom, das die 
6021-Control- Unit aussendet. Außerdem danke ich den anderen Freunden aus der 
Märklin-Mailing- Liste. <A name=Contents></A>
<HR>

<H3><U>INHALT</U> </H3>
<UL>
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#4dip"><B>Funktion der 
  4 DIP-Schalter der 6021-Control-Unit</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#def"><B>Definitionen</B></A> 

  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#trit_description"><B>Über 
  die Trits eines Pakets</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#address_description"><B>Adreßteil 
  eines Pakets</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#idle_state"><B>Idle 
  state</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#bit_description"><B>Bits 
  für Loks im neuen Motorola-Format</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#packets"><B>Beschreibung 
  der Abfolge der Pakete</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#details"><B>Details 
  über die letzten 8 binären Pulse eines Pakets</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#DIP3"><B>Funktion von 
  DIP-Schalter Nr.3 - Pause zwischen den Paketen</B></A> 
  <LI><A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#questions"><B>Fragen 
  und Antworten</B></A> </LI></UL>
<HR>

<H3><A name=4dip><U>FUNKTION DER 4 DIP-SCHALTER DER 6021-CONTROL- UNIT:</U> 
</A></H3>
<DL>
  <DT>DIP-Schalter Nr.1 
  <DD>[OFF]/[ON] -&gt;[OLD&amp;NEW] /[ONLY-NEW] Extrafunktion-Dekoder-Codes und 
  [OLD&amp;NEW] /[ONLY-NEW] "Fahrtrichtungsumkehr"-Information.<BR>Um mit den 
  Dekodern der alten Art (von Zy über LME bis 701.13) kompatibel zu bleiben, muß 
  DIP-Schalter Nr.1 in OFF-Stellung sein (dies erläutere ich noch weiter unten); 

  <DT>DIP-Schalter Nr.2 
  <DD>[OFF]/[ON] -&gt;[OLD]/[NEW] Motorola-Format; Richtungsanzeigen der 
  Control-80f (6036) werden aktiviert <I>(zur Klarstellung: Befindet sich 
  DIP-Schalter Nr.2 in OFF-Position wird ungeachtet der Stellung von 
  DIP-Schalter Nr.1 nur das "pure" alte Datenformat erzeugt - Anmerkung des 
  Übersetzers:)</I>. 
  <DT>DIP-Schalter Nr.3 
  <DD>Nur für das neue Motorola-Format. Pakete werden schneller gesendet, indem 
  die Pause zwischen jeder Serie von 18 Impulsen reduziert wird. Dies ist nicht 
  kompatibel mit den Chips der älteren Dekoder (vor 701.13, z.B. LME03 - 
  LME=Lenz Märklin Electronics) 
  <DT>DIP-Schalter Nr.4 
  <DD>Die Ausgangsspannung der Control-Unit wird auf +/-12 Volt stabilisiert. 
  </DD></DL>
<P>Mit DIP-Schalter Nr.1 auf OFF und Nr.2 auf ON kann tatsächlich eine Mischung 
zwischen dem neuen Motorola-Format und dem alten, für alte Funktions-Dekoder 
geeigneten Format eingestellt werden. Die Extrafunktionen F1, F2, F3 und F4 
werden dadurch sowohl bei "alten" Funktions-Dekodern (z.B. dem 
Digital-Kran-Dekoder) als auch den neuen Dekodern für das neue Format (z.B. dem 
Spur-1-Dekoder 6095 <I>und auch sowohl bei den neuen H0-Dekodern 60901 und 60902 
als auch den selbst modifizierten Delta-Dekodern mit dem 701.17b - Anmerkung des 
Übersetzers</I>) angesteuert.<BR>Bitte beachten Sie, daß die 6021-Control-Unit 
die DIP-Schalter nur während des "Einschaltens" sowie nach einem "Reset" ("Stop" 
und "Go" für eine halbe Sekunden gleichzeitig drücken) liest. Daher bleibt die 
Veränderung der DIP-Schalter während des normalen Betriebs ohne Auswirkung.<BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=def><U>DEFINITIONEN.</U></A></H3>
<UL>
  <LI>Grundfrequenz (Loks): Basiert auf der seriellen Datenübertragung mit 38400 
  baud. 
  <LI>Dauer eines Takts (Loks): 26 us (Mikrosekunden) = 1/38400 
  (ungefähr)<BR>Kommentar: Dies ist die Traktfrequenz der alten 6020-CU 
  <LI>Doppelte Frequenz (Weichen- und "alte" Funktionsdekoder): 76800 baud 
  <LI>Halbe Taktdauer (Weichen- und "alte" Funktionsdekoder): 13 us 
  <LI>Normale Pulsdauer (Loks): 8 x (Dauer eines Takts) = 208 us 
  <LI>Halbe Pulsdauer (solenoids): 8 x (Halbe Taktdauer) = 104 
  us<BR><I>Anmerkung des Übersetzers: Anstelle von "Pulsdauer" sollte vorstehend 
  besser von "Periodendauer" die Rede sein - denn die Pulse bestehen, wie 
  nachfolgend erläutert wird, aus einer Kombination von 1 x Takten high und 7 x 
  Takten low bzw. 7 x Takten high und 1 x Takten low.</I> 
  <LI>Binäre "1": Ein langer Puls <PRE>    -------
           -
    12345678
</PRE>
  <LI>Binäre "0": Ein kurzer Puls <PRE>    -
     -------
    12345678
</PRE>
  <LI>Ternäre "1": Ein Paar langer Pulse <PRE>    ------- -------
           -       -
    1234567812345678
</PRE>
  <LI>Ternäre "0": Ein Paar kurzer Pulse <PRE>    -       -
     ------- -------
    1234567812345678
</PRE>
  <LI>Ternäre "OPEN": Ein langer Puls gefolgt von einem kurzen Puls <PRE>    ------- -
           - -------
    1234567812345678
</PRE>
  <LI>Paket: Eine Folge von 18 binären Pulsen (Motorola-Format) bzw. von 9 
  ternären Pulsen ("Trits"). Jedem Paket folgt eine Pause, während der kein Puls 
  gesendet wird. 
  <LI>Doppel-Paket: Eine Folge von 2 Paketen (+ 2 Pausen) zur Fehlerkorrektur. 
  Genau besehen besteht ein Doppel-Paket aus einem Paket, einer Pause (t1), der 
  Wiederholung desselben Pakets und einer abschließenden Pause (t2). Für die 
  Erläuterung von t1 und t2 verweise ich auf einen folgenden <A 
  href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#DIP3"><U>Abschnitt</U></A> 

  <LI>Sonderfunktion: Richtungsabhängige Funktion der Märklin-Dekoder. Sie kann 
  mit dem "function"-Taster der Märklin-Control-Unit geschaltet werden. 
  <LI>Extrafunktionen: Neue richtungsunabhängige Funktionen. Sie können mit den 
  Tastern "f1","f2","f3","f4" der Märklin-Control-Unit geschaltet werden. 
</LI></UL>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=trit_description><U>ÜBER DIE TRITS EINES PAKETS</U> </A></H3>
<P>Ein Paket besteht aus 18 binären Pulsen bzw. 9 Trits. In Abhängigkeit von dem 
dadurch adressierten Dekodertyp werden die folgenden Pakete und 
Trit-Kombinationen benutzt: <PRE><FONT size=+0>
Loks: A1 A2 A3 A4 F S1 S2 S3 S4  (Grundfrequenz,
                      altes und neues Märklin-Motorola-Protokoll)
       -&gt; A1 A2 A3 A4 Adreßteil (ternär)
       -&gt; F           Sonderfunktions-Trit im binären Modus:
                      Die Sonderfunktion ist "An" bei zwei langen Pulsen,
                      "Aus" wenn zwei kurze Pulse gesendet werden
       -&gt; S1 S2 S3 S4 Geschwindigkeit und Richtungsumkehr-Befehl im alten
                      Motorola-Protokoll (im binären Modus);
                      Geschwindigkeit, Richtung und Status der
                      Extrafunktionen f1...f4 im neuen
                      Märklin-Motorola-Protokoll.
                      S1 S2 S3 S4 sind nicht mehr binäre oder ternäre
                      Daten (hierzu weiter unten).

Weichen: A1 A2 A3 A4 0 D0 D1 D2 S  (Doppelte Frequenz,
                      altes und neues Märklin-Motorola-Protokoll)
       -&gt; A1 A2 A3 A4 Adreßteil (ternär)
       -&gt; "0"         fixiertes Trit
       -&gt; D2 D1 D0    Binäre Trits zum Adressieren der einzelnen Ports
                      des Weichendekoders (Z,B. des k83). Bereich: 0...7; D2=MSB, D0=LSB.
       -&gt; S           Status des k83: "1"=on, "0"=Ausschalten aller
                      Ports des k83, ungeachtet des Inhalts von D2 D1 D0.

"Alte" Funktions-Dekoder: A1 A2 A3 A4 1 F1 F2 F3 F4
                      (Doppelte Frequenz, altes Märklin-Motorola-Protokoll)
       -&gt; A1 A2 A3 A4 Adreßteil (ternär)
       -&gt; "1"         fixiertes Trit
       -&gt; F1 F2 F3 F4 Binäre Trits zum An- und Ausschalten jeweils eines
                      der 4 Funktionen f1...f4.
</FONT>
</PRE>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=address_description><U>ADRESSTEIL "A1 A2 A3 A4" EINES PAKETS</U> 
</A></H3>
<P>"A1 A2 A3 A4" sind Trits, d.h. sie werden als ternäre "Bits" verwendet. 
3^4=81 Adressen sind dadurch möglich. Tatsächlich verwendet Märklin aber nur 80 
Adressen für Loks und "alte" Funktions-Dekoder und nur 64 Adressen für 
Weichendekoder.<BR>Die ternären Adressen entsprechen der Anleitung für die 
Einstellung der DIP-Schalter, wie sie den Dekoder-Lokomotiven beigefügt sind, 
sowie den entsprechenden Märklin- Digital-Publikationen. Es sind 8 DIP-Schalter, 
numeriert von 1 bis 8.<BR><PRE><FONT size=+0>
-&gt; 1,3,5,7 verbinden die 4 Adreß-Eingänge mit Masse ;
-&gt; 2,4,6,8 verbinden die 4 Adreß-Eingänge mit Vcc (Plus);
</FONT>
</PRE>
<P>sind diese Eingänge weder mit Masse noch mit Vcc verbunden, so werden sie als 
"open" erkannt..<BR>So bedeutet z.B. -2--5-7- : <PRE><FONT size=+0>
      -2  1. trit   = 1
      --  2. trit = open.
      5-  3. trit   = 0
      7-  4. trit   = 0
</FONT>
</PRE>
<P>Bitte beachten Sie, daß in dem Märklin-/Motorola-Protokoll die ternäre 
Adresse "0000" als "80" definiert ist, die Adresse "open open open open" der 
Lok- und "alten" Funktionsdekoder hingegen zum Senden des "idle state" benutzt 
wird (hierzu mehr im nächsten Abschnitt). <PRE><FONT size=+0>
Beispiel: Adresse 34:
34:3=11      Rest: 1
11:3= 3      Rest: 2
 3:3= 1      Rest: 0
 1:3= 0      Rest: 1

Somit: 34=1*27+0*9+2*3+1*1

</FONT>
</PRE>
<P>Das ternäre Format von 34 ist 1021, d.h. "1" "0" "open" "1". Im 
Motorola-Format werden die Daten aber tatsächlich in umgekehrter Reihenfolge 
gesendet, d.h.: <PRE><FONT size=+0>
"1" "open" "0" "1" (Trits) oder
11 10 00 11 (bits)
-2 -- 5- -8 (Märklin-DIP-Schalter)
A1 A2 A3 A4
</FONT>
</PRE>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=idle_state><U>IDLE STATE</U> </A></H3>
<P>Der "idle state" erscheint nach dem Einschalten sowie nach einem Reset.<BR>Im 
alten Motorola-Protokoll sorgt der "idle state" für eine negative Dauerspannung 
an der Schiene (am roten Anschluß gegenüber dem braunen Anschluß 
gemessen).<BR>Im neuen Märklin-Motorola-Protokoll besteht der "idle state" im 
ununterbrochenen Senden von Paketen mit einer in Märklin Digital nicht benutzten 
Adresse, z.B. vier "open"-Trits, und einem Datenteil aus fünf "0"-Trits.<BR>Die 
hierbei benutzte Adresse ist tatsächlich "80" im ternären Code; die bei Lok- und 
"alten" Sonderfunktions-Dekodern einstellbare Adresse "80" besteht hingegen aus 
4 "0"-Trits. <BR>Der "idle state" endet sobald das erste gültige Paket für Loks 
gesendet wird.<BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=bit_description><U>BITS FÜR LOKOMOTIVEN IM NEUEN MOTOROLA-FORMAT</U> 
</A></H3>
<P>Das neue Märklin-Motorola-Format wird gesendet, wenn DIP-Schalter Nr.2 der 
Control-Unit auf ON gestellt wird.<BR>Im neuen Märklin-Motorola-Format: 
<UL>
  <LI>sind die ersten 4 Trits (4 Paare von Pulsen) ternär wie gewohnt, die Werte 
  reichen von "0...80" wobei: <BR>- der Wert "0" von Märklin als Lokadresse 80 
  bezeichnet wird (d.h.: die Lokadresse 80 wird als "0" gesendet);<BR>- der Wert 
  ";80" im "idle" der 6021-Control-Unit gesendet wird;<BR>
  <LI>das 5. Trit wie gewohnt als binäres Paar (d.h. zwei gleiche Pulse - 
  zweimal "1" oder zweimal "0") verwendet wird;<BR>
  <LI>Die letzten 4 "trits" (4 Paare von Pulsen) bislang als binäre Paare von 
  Pulsen verwendet wurden, so daß mit ihnen 2^4=16 verschiedene Kombinationen 
  dargestellt werden konnten. Nunmehr werden sie als 8 unterschiedliche und 
  eigenständige Pulse bzw. Bit verwendet und können daher 2^8=256 verschiedene 
  Kombinationen (Werte) darstellen. Dies bedeutet, daß nunmehr auch die 
  Kombination aus "01", die bislang nicht zulässig bzw. definiert war (nur "11", 
  "00" und "10" waren im normalen ternären Motorola-Format zulässig), definiert 
  ist und auftritt. Allerdings können aus Kompatibilitätsgründen leider nicht 
  alle dieser 256 Kombination verwendet werden. </LI></UL>
<P>Festzuhalten ist also, daß bei den ersten 10 binären Pulsen (5 Trits) des 
neuen"Märklin-Motorola-Formats" keinerlei Unterschied zu den ersten 10 binären 
Pulsen (5 Trits) des alten Formats besteht. Beispielsweise bedeuten "11" an 9. 
und 10 Stelle - also als 9. und 10. Bit bzw. als 5. Trit (= 1) unverändert 
"function on". Nur die letzten 8 Trits unterscheiden sich im neuen Format von 
denen des alten Formats.<BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=packets><U>BESCHREIBUNG DER ABFOLGE DER PAKETE</U> </A></H3>
<P>Im neuen Format werden die Datenpakete für JEDE LOK wie folgt gesendet: <PRE><FONT size=+0>
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   (*)
- 2x Doppel-Paket für Extrafunktion f1;
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   [wie (*)]
- 2x Doppel-Paket für Extrafunktion f2;
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   [wie (*)]
- 2x Doppel-Paket für Extrafunktion f3;
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   [wie (*)]
- 2x Doppel-Paket für Extrafunktion f4;
</FONT>
</PRE>
<P>Wenn ZWEI LOKS aktiv sind, sieht die Abfolge der Datenpakete so aus: <PRE><FONT size=+0>
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   (1. Lok)
- 2x Doppel-Paket für Extrafunktion f1; (1. Lok)
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   (2. Lok)
- 2x Doppel-Paket für Extrafunktion f1; (2. Lok)
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   (1. Lok)
- 2x Doppel-Paket für Extrafunktion f2; (1. Lok)
- 2x Doppel-Paket für Geschwindigkeit und Richtung;   (2. Lok)
- 2x Doppel-Paket für Extrafunktion f2; (2. Lok)
...
</FONT>
</PRE>
<P>und so weiter. <BR>Der Grund für das wiederholte Aussenden identischer 
Datenpakete ist die Erhöhung der Störsicherheit, denn wenn ein elektrisches 
Signal über ein rotierendes Rad aufgenommen bzw. übertragen wird entstehen 
elektrische Störungen. Zur Fehlerkorrektur reagiert ein Dekoder nur, wenn er 
zweimal identische Informationen empfangen hat. Nur unter glücklichen Umständen 
genügen zwei aufeinanderfolgenden Pakete. Normalerweise sind mehr als zwei 
Pakete erforderlich - typischerweise vier oder mehr Pakete.<BR><I>Anmerkung des 
Übersetzers: Dies entspricht nicht meinen Erfahrungen. Zur Verkürzung der 
Reaktionszeiten begnüge ich mich in LOK mit dem Aussenden einfacher 
Doppel-Pakete. Trotz der Verwendung der alten und weniger störsicheren 
Metallgleise sind verzögerte Reaktionen aufgrund nicht erkannter Befehle die 
Ausnahme und auf Loks mit nur wenigen elektrisch leitenden Rädern (z.B. 
dreiachsige Loks mit Haftreifen und abgenutzten Rädern) beschränkt. Allerdings 
mag ein besonderer Refresh-Algorithmus dieses Verhalten begünstigen.</I><BR>Es 
gibt keine Beschränkung hinsichtlich der Zahl der Loks, die in diesem 
Refresh-Zyklus adressiert werden können. Dies bedeutet, daß bis zu 80 Loks, also 
alle 80 Lokadressen, in dem Refresh-Zyklus gleichzeitig adressiert werden 
können. Der Refresh-Zyklus ist sehr zeitaufwendig, wenn die DIP-Schalter Nr.1 
und Nr.2 auf ON gestellt sind (vgl. Abschnitt <A 
href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#DIP3">FUNKTION DES 
DIP-SCHALTERS Nr.3</A>). Der Refresh-Zyklus benötigt wesentlich weniger Zeit, 
wenn sich die DIP-Schalter Nr.1 und Nr.2 in OFF-Stellung befinden. Hier werden 
nur 4 Pakete je Lok gesendet, so daß ein kompletter Zyklus für alle 80 Loks nur 
etwas mehr als zwei Sekunden benötigt.<BR>Die Abfolge der Pakete ist in 
umgekehrter Folge zu dem Aktivieren der Loks: Wenn die Loks beispielweise in der 
Reihenfolge 1,2,3,4,5 aktiviert werden, werden die Pakete im Refresh-Zyklus in 
der Reihenfolge 5,4,3,2,1 gesendet. <BR><BR>Wir wollen einen Blick auf den 
Datenstrom werfen, den die 6021-Control-Unit aufgrund einzelner Kommandos 
aussendet. Die folgenden Abschnitte wurden unter Zuhilfenahme eines 
"Schnüffler-"Programms erstellt, das von Rob Hamerling entwickelt wurde. Für 
weitere Informationen verweise ich auf <A 
href="http://users.capitolonline.nl/~nlco5907/mklsoft.html">die Homepage von Rob 
Hamerling</A>. <BR>Bei jeder Änderung der Geschwindigkeit einer Lok sendet die 
6021-Control-Unit zunächst 16 identische Pakete (8 Doppel-Pakete) mit den neuen 
Geschwindigkeitsinformationen und setzt dann den Refresh-Zyklus fort.<BR>Bei 
Änderung der Fahrtrichtung und Aussenden der "Richtungsänderungs"information 
sendet die 6021-Control-Unit bei DIP-Schalter Nr.2 in "ON"-Stellung 16 Pakete (8 
Doppel-Pakete) des neuen Typs mit der neuen "Richtungs"information. Ist 
DIP-Schalter Nr.1 in "OFF"-Stellung werden auch 12 "Richtungsänderungs"-Pakete 
des alten Typs (6 Doppel-Pakete) gesendet.<BR><I>Anmerkung des Übersetzers: Dies 
bedeutet, daß auch im neuen Format immer das "Richtungsänderungs"kommando des 
alten Typs - "0 0 0 1" - als Teil der Geschwindigkeitsdaten gesendet wird; ein 
"reines" neues Format ohne "0 0 0 1", das ja im neuen Format an sich nicht 
benötigt wird, gibt es tatsächlich nicht. Dieser im neuen Format an sich nicht 
mehr vorhandene Geschwindigkeitswert "1" wird von den neueren Dekodern mit dem 
Chip 701.17(b) und neuer ignoriert. Die älteren Dekoder werten ihn aus, 
ignorieren hingegen die "Richtungs"information des neuen Formats; dies gilt 
zumindest für die am weitesten verbreiteten älteren Dekoder mit dem 701.13- 
Chip. Die noch älteren Chips kommen damit aber nicht zurecht und benötigen einen 
rein im alten Format gesendeten Fahrtrichtungsumkehrbefehl "0 0 0 1". Dieser 
kann wie beschrieben mit DIP-Schalter Nr.1 im neuen Format aktiviert 
werden.</I><BR>Beim Drücken einer der Extrafunktions-Tasten (f1...f4) der 
6021-Control-Unit werden der Refresh-Zyklus unterbrochen, 12 identische Pakete 
(6 Doppel-Pakete) mit dem Status der jeweiligen Extrafunktion mit der Adresse 
der jeweils adressierten Loks gesendet und danach der Refresh-Zyklus 
fortgesetzt.<BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=details><U>DETAILS ÜBER DIE LETZTEN 8 BINÄREN PULSE EINES 
PAKETS.</U> </A></H3>
<P>Nunmehr werde ich lediglich die letzten 8 binären Pulse erörtern. Bislang 
wurden sie als 4 ternäre Pulse verstanden, wobei aber nur die Werte "0" und "1" 
verwendet wurden, so daß sie tatsächlich 4 binäre Digits waren und die 16 (2^4) 
Fahrtstufen des Märklin-Digital-Systems darstellten. Von jetzt an sind sie als 8 
binäre pulse mit 2^8=256 möglichen Kombinationen zu verstehen. 
<P>Nennen wir die 8 binären Pulse: A E B F C G D H . 
<P>Im alten Motorola-Format stellten sich diese Bits tatsächlich als AABBCCDD 
(E=A, F=B, G=C, D=H, 16 Kombinationen) dar und, denkt man an Trits<BR><BR>
<P><A name=TABLE1></A>
<CENTER>
<TABLE borderColor=#000000 border=1>
  <TBODY>
  <TR>
    <TD width=129>
      <CENTER>invers -&gt; D C B A</FONT></CENTER></TD>
    <TD width=80>
      <CENTER>Fahrtstufen</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>1 1 1 1</CENTER></TD>
    <TD width=80>
      <CENTER>14</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>1 1 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>13</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>...</CENTER></TD>
    <TD width=80>
      <CENTER>...</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 1 1</CENTER></TD>
    <TD width=80>
      <CENTER>2</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 0 1</CENTER></TD>
    <TD width=80>
      <CENTER>Umkehr</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 0 0</CENTER></TD>
    <TD width=80>
      <CENTER>Stop</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER>Tabelle 1 <BR></CENTER>
<P>Um das neue Märklin-Motorola-Format besser analysieren zu können, wollen wir 
diese Bits wie folgt aufsplitten: <PRE><FONT size=+0>
                     A   B   C   D
                       E   F   G   H
</FONT>
</PRE>
<P>Die Fahrtstufe ist immer in den Pulsen A B C D vorhanden und sie ist 
kompatibel mit dem alten Format<BR><BR>
<P><A name=TABLE2></A>
<CENTER>
<TABLE borderColor=#000000 border=1>
  <TBODY>
  <TR>
    <TD width=129>
      <CENTER>invers -&gt; D C B A</FONT></CENTER></TD>
    <TD width=80>
      <CENTER>Fahrtstufen</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>1 1 1 1</CENTER></TD>
    <TD width=80>
      <CENTER>14</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>1 1 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>13</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>...</CENTER></TD>
    <TD width=80>
      <CENTER>...</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 1 1</CENTER></TD>
    <TD width=80>
      <CENTER>2</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>(0 0 0 1)</CENTER></TD>
    <TD width=80>
      <CENTER>(Umkehr)</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>0 0 0 0</CENTER></TD>
    <TD width=80>
      <CENTER>Stop</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER>Tabelle 2 <BR></CENTER>
<P>Bitte beachten Sie, daß theoretisch der Code "0 0 0 1" im neuen Format nicht 
benötigt wird (er ist überflüssig!). Allerdings sendet die 6021-Control-Unit bei 
DIP-Schalter Nr.2 in ON-Stellung zum Zwecke der Rückwärts-Kompatibilität 16 
Pakete mit einer Mischung des "alten Fahrtrichtungsumkehr"-Befehls (DCBA=0001) 
und der absoluten Richtungsinformation (HGFE ist verschieden von DCBA). Außerdem 
werden bei DIP-Schalter Nr.2 in ON-Stellung und DIP-Schalter Nr.1 in 
OFF-Stellung ("neues Motorola-Format" MIT Rückwärtskompatibilität zu den 
LME-Dekodern), vor den eben beschriebenen 16 Paketen 12 alte Motorola-"11 00 00 
00"-Pakete (Fahrtrichtungsumkehr) gesendet.<BR><I>Anmerkung des Übersetzers: Die 
letztgenannte Einstellung - DIP-Schalter Nr.1 in OFF-Stellung - ist auch 
erforderlich, wenn im neuen Format die alten (Extra)Funktionsdekoder (z.B. der 
Tanzwagen oder der ROCO-Kran) kontrolliert werden sollen, da bei DIP-Schalter 
Nr.1 in ON-Stellung bei Betätigen der Tasten F1- F4 nicht die erforderlichen 
Befehle generiert und gesendet werden.</I> 
<P>Bei der oben beschriebenen Abfolge der Pakete hat sich nur der Inhalt von 
EFGH geändert.<BR>
<H4><A name=details1>DAS DOPPEL-PAKET FÜR GESCHWINDIGKEIT UND RICHTUNG </A></H4>
<P>Wenn das Doppel-Paket die Geschwindigkeit und Richtung bestimmt, hängen die 
Werte von EFGH von der Fahrtstufe ab:<BR><BR>
<P><A name=TABLE3></A>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129>
      <CENTER>Fahrtstufen </CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>-14 bis -7</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 0</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>-6 bis -0</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>+0 bis +6</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>+7 bis +14</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 0</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER>Tabelle 3<BR></CENTER>
<P>Beachten Sie, daß "+0" Geschwindigkeit=0 und Vorwärts bedeutet, "-0" hingegen 
Geschwindigkeit=0 und Rückwärts. In "-6 bis -0" und "+6 bis +0" ist der Befehl 
für die Fahrtrichtungsumkehr "0 0 0 1" enthalten<I>, der im neuen Format aber an 
sich nicht mehr benötigt würde (Anmerkung des Übersetzers)</I>.<BR>Außerdem ist 
es auf dieser Grundlage nicht möglich, die letzten 8 Bits eines Pakets mit 
denselben Bits des alten Format zu verwechseln. Es ist nämlich tatsächlich 
unmöglich, eine Bitfolge von AABBCCDD zu erhalten, denn die Beziehung zwischen H 
und dem MSB des Geschwindigkeits-Teils (D) bestimmt sich immer nach:<BR>
<P>
<CENTER>H = <STRONG>NOT</STRONG>(D) <BR></CENTER>
<P>Es gibt insgesamt 32 Kombinationen für Geschwindigkeit und Richtung, nämlich 
die Gesamtzahl der Geschwindigkeiten von -14 bis +14 plus 2 Kombinationen für 
die Fahrtrichtungsumkehr des alten Formats, die noch aus Gründen der 
Kompatibilität mit den älteren Dekodern benutzt wird.<BR><BR>
<H4><A name=details2>DAS DOPPEL-PAKET FÜR GESCHWINDIGKEIT UND DEN STATUS VON 
F1...F4 </A></H4>
<P>Standard-Werte<BR><BR>
<P><A name=TABLE4></A>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>f1</CENTER></TD>
    <TD width=80>
      <CENTER>f2</CENTER></TD>
    <TD width=80>
      <CENTER>f3</CENTER></TD>
    <TD width=80>
      <CENTER>f4</CENTER></TD></TR>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Standard-Werte</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 0 f</CENTER></TD>
    <TD width=80>
      <CENTER>0 0 1 f</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 1 f</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 1 f</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER>Tabelle 4a<BR></CENTER>
<P>Der Wert der Variablen "f" im letzten Bit (H) aller Reihen hängt vom Status 
der betreffenden Extrafunktion ab: OFF: f="0"; ON: f="1".<BR>Bitte beachten Sie, 
daß in den Tabellen 3 und 4a nur 6 der möglichen Kombinationen der drei Bits EFG 
verwendet werden.<BR>Da andererseits das Bit "f" je nach Status der jeweiligen 
Extrafunktion sowohl "0" als auch "1" sein kann, können die möglichen 
Kombinationen von AEBFCGDH mit AABBCCDD aus dem alten Motorola-Protokoll 
kollidieren.<BR>Aus diesem Grund gibt es einige Ausnahmen von der Tabelle 4a. 
Diese Ausnahmen sollen die Kompatibilität mit dem alten Format gewährleisten. 
Tatsächlich könnte sich z.B. im Falle der Fahrtstufe 2 und dem Status der 
Extrafunktion f1 mit EFGH=1100: <PRE><FONT size=+0>
    A   B   C   D
      E   F   G   H
    1 1 1 1 0 0 0 0
</FONT>
</PRE>
<P>ergeben - was exakt der Fahrtstufe "2" im alten Format entspricht.<BR>Die 
Ausnahmen sind aus Tabelle 4b ersichtlich.<BR><BR>
<P>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>f1 OFF</CENTER></TD>
    <TD width=80>
      <CENTER>f1 ON</CENTER></TD></TR>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Standard-Werte</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 0 0</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 0 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Fahrtstufen </CENTER></TD>
    <TD width=80></TD>
    <TD width=80></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>2</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>10</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 1</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER><BR></CENTER>
<P>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>f2 OFF</CENTER></TD>
    <TD width=80>
      <CENTER>f2 ON</CENTER></TD></TR>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Standard-Werte</CENTER></TD>
    <TD width=80>
      <CENTER>0 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>0 0 1 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Fahrtstufen </CENTER></TD>
    <TD width=80></TD>
    <TD width=80></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>3</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>11</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 1</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER><BR></CENTER>
<P>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>f3 OFF</CENTER></TD>
    <TD width=80>
      <CENTER>f3 ON</CENTER></TD></TR>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Standard-Werte</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 1 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Fahrtstufen </CENTER></TD>
    <TD width=80></TD>
    <TD width=80></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>5</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>13</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 1</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER><BR></CENTER>
<P>
<CENTER>
<TABLE border=2>
  <TBODY>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>f4 OFF</CENTER></TD>
    <TD width=80>
      <CENTER>f4 ON</CENTER></TD></TR>
  <TR>
    <TD width=129></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD>
    <TD width=80>
      <CENTER>E F G H</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Standard-Werte</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>1 1 1 1</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>Fahrtstufen </CENTER></TD>
    <TD width=80></TD>
    <TD width=80></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>6</CENTER></TD>
    <TD width=80>
      <CENTER>1 0 1 0</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD></TR>
  <TR>
    <TD width=129>
      <CENTER>14</CENTER></TD>
    <TD width=80>
      <CENTER>normal</CENTER></TD>
    <TD width=80>
      <CENTER>0 1 0 1</CENTER></TD></TR></TBODY></TABLE></CENTER>
<P>
<CENTER><BR>Tabelle 4b<BR></CENTER>
<P>Bitte beachten Sie, daß die Kombinationen 1010 und 0101 von EFGH 
normalerweise dazu dienen, die Fahrtrichtung in dem Paket für Geschwindigkeit 
und Richtung anzugeben. Diese normale Bedeutung von EFGH=1010 ist "Rückwärts, 
Geschwindigkeit zwischen -14 und -7", bei den Ausnahmen in Tabelle 4b wird es es 
hingegen für Geschwindigkeit 2,3,5,6 verwendet. In ähnlicher Weise bedeutet 
EFGH=0101 normalerweise "Vorwärts, Geschwindigkeit zwischen 0 und 6", in Tabelle 
4b hingegen ist es für die Fahrtstufen 10,11,13,14 verwendet. Aufgrund dieser 
Ausnahmen ist das Märklin-Motorola-Protokoll vollständig konsistent.<BR>Die für 
die Übermittlung der Zustände der Extrafunktionen verwendete Gesamtzahl der 
Kombinationen dieser 8 Bit beträgt:<BR>(Zahl der Extrafunktionen) x (Zahl der 
Fahrtstufen) x (ON/OFF) = 4 x 16 x 2 = 128 <BR>Bei dieser Berechnung habe ich 
bei den Fahrstufen auch die beiden Werte von ABCD berücksichtigt, die wegen der 
erforderlichen Kompatibilität mit den älteren Dekodern für die 
Fahrtrichtungsumkehr im alten Protokoll erforderlich sind.<BR>
<H4>BEISPIEL </H4>
<P>Lok Nr.34, Sonderfunktion ON, Geschwindigkeit -4, Extrafunktionen f1 ON und 
f2,f3,f4 OFF. <PRE><FONT size=+0>
<A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#address_description">Addreßteil</A>: 11 10 00 11
Sonderfunktion: 11

Das 1. Paket besteht aus:
Geschwindigkeit (aus <A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#TABLE2">Tabelle 2</A>):  A   B   C   D         1   0   1   0
aus <A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#TABLE3">Tabelle 3</A>:                      E   F   G   H         1   0   1   1

Das 2. Paket besteht aus:
Geschwindigkeit (aus <A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#TABLE2">Tabelle 2</A>):  A   B   C   D         1   0   1   0
aus <A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#TABLE4">Tabelle 4</A>:                      E   F   G   H         1   1   0   1
</FONT>
</PRE>
<P>etc.<BR><BR>Das komplette Set der Pakete für Lok Nr.34 besteht aus: <PRE><FONT size=+0>
4x  [11 10 00 11 11 11 00 11 01]  Geschwindigkeit &amp; Richtung
4x  [11 10 00 11 11 11 01 10 01]  Geschwindigkeit &amp; f1 ON
4x  [11 10 00 11 11 11 00 11 01]  Geschwindigkeit &amp; Richtung
4x  [11 10 00 11 11 10 00 11 00]  Geschwindigkeit &amp; f2 OFF
4x  [11 10 00 11 11 11 00 11 01]  Geschwindigkeit &amp; Richtung
4x  [11 10 00 11 11 10 01 11 00]  Geschwindigkeit &amp; f3 OFF
4x  [11 10 00 11 11 11 00 11 01]  Geschwindigkeit &amp; Richtung
4x  [11 10 00 11 11 11 01 11 00]  Geschwindigkeit &amp; f4 OFF
</FONT>
</PRE>
<P>Mit "4x" meine ich "zweimal ein Doppel-Paket" <BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=DIP3><U>FUNKTION VON DIP-SCHALTER NR.3 - PAUSE ZWISCHEN DEN PAKETEN 
</U></A></H3>
<P>2x Doppel-Paket<BR><PRE><FONT size=+0>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp; ---&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---
#3 OFF&nbsp; ----------&nbsp;&nbsp; --&nbsp;&nbsp; -------&nbsp;&nbsp; --&nbsp;&nbsp; ----------&nbsp;&nbsp; ...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t1&nbsp;&nbsp;&nbsp;&nbsp; t2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t3

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ---&nbsp; --- ---&nbsp; ---
#3 ON&nbsp;&nbsp; -&nbsp;&nbsp; --&nbsp;&nbsp; -&nbsp;&nbsp; --&nbsp;&nbsp; -...
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t2&nbsp;&nbsp; t1&nbsp;&nbsp; t2&nbsp; t1&nbsp; t2
</FONT>
</PRE>
<P>t1, t2 und t3 sind Pausen zwischen den 
Paketen.<BR><BR><B>6021-Control-Unit<BR></B>Befindet sich DIP-Schalter Nr.3 in 
OFF-Stellung, sind t1=1,525 ms, t2=4,024 ms und t3=6,025 ms<BR>Befindet sich 
DIP-Schalter Nr.3 in ON-Stellung, sind t1=1,525 ms and t2=1,025 ms<BR>Befindet 
sich DIP-Schalter Nr.3 in OFF-Stellung, sind t1 &lt; t2 und t1 &lt; t3, 
andernfalls ist t1 &gt; t2. Im letztgenannten Fall ist die durchschnittliche 
bzw. mittlere Spannung am Gleis näher an 0 V als im erstgenannten Fall. Eine 
durchschnittliche/mittlere Spannung nahe 0 V ist vorteilhaft bei 
2-Leiter-Systemen, besonders wenn der Lok-Dekoder normal angeschlossen wird (der 
gemeinsame Anschluß der Lampen am braunen Kabel des Dekoders), da das - manuelle 
- Umdrehen/Umsetzen der Lok auf dem Gleis die Helligkeit der Lichter kaum 
beeinflußt.<BR>Anmerkung: C80/81-decoders, die mit einem LME03-chip bestückt 
sind, funktionieren nicht korrekt mit DIP-Schalter Nr.3 in ON-Stellung. Außerdem 
funktionieren sie nicht richtig mit t1=1,525 ms und t2=t3=4,025 ms. 
<P><B>Alte 6022-Central-Unit</B> (alte Central-Unit mit internem 
145026-Encoder-Chip) <BR>t1=1,25 ms und t2 schwankt zwischen ca. 4 ms und 5,9 
ms. 
<P>Wir wollen die Gesamtlänge eines Doppel-Pakets (einschließlich Pausen) bei 
einer 6021-Control-Unit berechnen. <PRE><FONT size=+0>
Die erste Wiederholung der 18 Bits dauert:
(1/38400 * 8 Takte * 2 Bits * 9 Trits) s = 3,75 ms

Eine Doppel-Paket dauert:
(3,75 + 1,525 + 3,75 + 4,025) ms = 13,05 ms (lange Pausen, DIP-Schalter Nr.3 = OFF,
                                             nur t1 und t2 berücksichtigt)
(3,75 + 1,525 + 3,75 + 6,025) ms = 15,05 ms (lange Pausen, DIP-Schalter Nr.3 = OFF,
                                             nur t1 und t3 berücksichtigt)
(3,75 + 1,525 + 3,75 + 1,025) ms = 10,05 ms (kurze Pausen, DIP-Schalter Nr.3 = ON)

2x Doppel-Pakete dauern:
(13,05 + 15,05) ms = 28,1 ms (lange Pausen, DIP-Schalter Nr.3 = OFF)
(10,05 * 2) ms     = 20,1 ms (kurze Pausen, DIP-Schalter Nr.3 = ON)

Ein komplettes Datenset für eine Lok dauert:
(28,1 * 8) ms = 224,8 ms (lange Pausen, DIP-Schalter Nr.3 = OFF)
(20,1 * 8) ms = 160,8 ms (kurze Pausen, DIP-Schalter Nr.3 = ON)

Die kompletten Datensets für 80 Loks dauern:
(224,8 * 80) ms = 17,98 s (lange Pausen, DIP-Schalter Nr.3 = OFF)
(160,8 * 80) ms = 12,86 s (kurze Pausen, DIP-Schalter Nr.3 = ON)
</FONT>
</PRE>
<P>Nun wollen wir die unterschiedlichen Werte für t1 und t2 (und t3) prüfen. Der 
Motorola-Encoder 145026 bemißt t1 zu 3 Trit-Längen, also 1,248 ms. Dies sollte 
die "reguläre" Dauer von t1 sein, wie von den alten 6020 und 6022 gesendet. 
Andererseits gibt das Datenblatt des 145026 die "dead time discriminator" des 
Chips, also die Maximaldauer unseres "t1" mit etwas mehr als 4 Trit-Längen 
(1,742 ms gegenüber der Dauer von exakt "4 Trit-Längen" von 1,664 ms) an. Die 
alten Central-Units (6020 und 6022) folgen mit t1=1,25 ms den Vorgaben des 
Datenblatts des 145026-Encoders. Andererseits ist die Pause t1 der 
6021-Control-Unit mit ca.1,5 ms gerade noch kompatibel mit den Vorgaben für den 
145026-Encoder (aber an der Grenze zur Inkompatibiltät). <BR>
<P><A href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück 
zum Inhaltsverzeichnis</A> 
<HR>

<H3><A name=questions><U>FRAGEN UND ANTWORTEN</U> </A></H3>
<P>Frage Nr.1:<BR>Wenn ich es richtig verstehe sind das LENZ- und das 
Märklin-System nicht kompatibel, d.h. daß die erweiterten Funktionsdekoder von 
LENZ nicht im Märklin-Motorola-System funktionieren?<BR>Antwort:<BR>So ist es. 
Funktionsdekoder von Lenz funktionieren nur mit dem Lenz-Protokoll, 
"Motorola"-Funktionsdekoder funktionieren nur mit dem Motorola-Format. 
Verkompliziert wird dies dadurch, daß nunmehr zwei Sorten von 
Motorola-Funktionsdekodern existieren!<BR><I>Anmerkung des Übersetzers: 
Dott.Scorzoni meint damit die vier Funktionen der Funktionsdekoder im alten 
Format, die z.B. in den Funktionsmodellen wie Tanz- und Panoramewagen oder auch 
dem Digital-Kran Verwendung finden, und die vier Extrafunktionen des neuen 
Formats, die originär für zusätzliche Funktionen der Loks - TELEX, Geräusche, 
Rauch, Abschalten der Motorregelung - verwendet werden.</I> <BR>(Ich warte noch 
darauf, daß ein Lok- bzw. Funktionsdekoder beide Formate - das Märklin- und das 
Lenz-Protokoll - versteht. Möglich ist es mit der Ultra-Large-Scale- 
Integration!)<BR>1) Die früheren Typen des Funktionsdekoders waren in einigen 
Digital-Wagen und dem Digital-Kran von Märklin montiert <I>(und dem Digital-Kran 
von ROCO - Anmerkung des Übersetzers)</I>. Sie können nur angesteuert werden, 
wenn sich DIP-Schalter Nr.1 der 6021-Control-Unit in OFF-Stellung befindet. Sie 
arbeiten mit dem Format und der "doppelten Frequenz" des k83-Dekoders (6083), 
nur daß ein "Trit" (oder besser: Pulspaar) verschieden ist <I>(Dies ist das 5. 
"Trit" bzw, Pulspaar, das bei den Weichendekodern den Wert "00" und bei den 
Funktionsdekodern den Wert "11" besitzt - Anmerkung des Übersetzers)</I>. 
Außerdem hat es Speicher zum Speichern des Kommandos, die ja nicht 
kontinuierlich gesendet werden sondern nur beim Drücken einer der Tasten f1 ... 
f4 oder beim Erhalt eines entsprechenden Kommandos vom Interface. Märklin 
verkauft diese alten Funktions-Dekoder nicht (aber es gibt Extrafunktions- 
Dekoder für das neue Motorola-Märklin-Format). Sie können diesen Dekoder- Typ 
aber beispielsweise von Modeltreno, via Cipriani 6, 40131 Bologna, Italien, Fax: 
+39-51- 524114 in nicht miniaturisierter und zum Einbau in Wagen bestimmter Form 
kaufen. <I>Außerdem wurde in der Elektor im Rahmen des EDITS-Projekts die 
Bauanleitung zu derartigen Dekodern veröffentlicht (Anmerkung des 
Übersetzers).</I><BR>2) Das neue Format wird von der 6021-Control-Unit gesendet, 
wenn sich der DIP-Schalter Nr.2 in ON-Stellung befindet. Gegenwärtig 
funktioniert dies nur mit den 701.17-Chips, die auf dem c95-Dekoder (6095) 
montiert sind. <I>Dies ist nicht - mehr - zutreffend. Zum einen gibt es schon 
längere Zeit auch in H0 Delta-Dekoder und auch lokspezifische 6090-Dekoder mit 
dem 701.17 bzw. 701.17b, die das neue Format auf jeden Fall hinsichtlich der 
Richtungsumschaltung auswerten können. Außerdem lassen sich alle Dekoder mit dem 
701.17 bzw. 701.17b - leider offenbar nicht auch die mit dem 701.21/a - 
individuell um die vier neuen Extrafunktionen erweitern. Schließlich gibt 
nunmehr sowohl H0- Loks mit Extra-Funktionen (z.B. Geräusch) und mit den 60901, 
60902 usw. nun auch offiziell Dekoder von Märklin, die die vier neuen 
Extrafunktionen zur Verfügung stellen. Bezeichnenderweise hat mir Märklin aber 
nur wenige Monate vor dem Ankündigen dieser Dekoder auf eine entsprechende 
Anfrage hin mitgeteilt, daß man auf absehbare Zeit nicht beabsichtige, dieses 
neue Format in H0 zu nutzen (Anmerkung des Übersetzers).</I> Der Status der 
Extrafunktionen wird im neuen Motorola-Protokoll kontinuierlich gesendet. Es ist 
anzunehmnen, daß dies in Zukunft das Standard-Protokoll werden wird und die 
nächsten weiter miniaturisierten c90 die Möglichkeit besitzen werden, die vier 
neuen Extrafunktionen zu nutzen. 
<P>Frage Nr.2:<BR>Wird das neue Protokoll nur für Loks benutzt oder wird es auch 
bei Weichendekodern (k83) eingesetzt (anders gesagt: Kann ich meine 
Elektor-Weichendekoder in dem neuen Protokoll 
weiterbenutzen)?<BR>Antwort:<BR>Das neue Protokoll wird nur für Loks und 
Extrafunktions-Dekoder verwendet. Märklin hat für Kompatibilität mit den 
tausenden der bis heute verkauften k83- Weichendekoder gesorgt. Sie können daher 
Ihre Elektor-Weichendekoder oder dazu kompatible Dekoder (z.B. die 
Modeltreno-66001-Dekoder) weiterverwenden.<BR><I>Anmerkung des Übersetzers: Um 
es auf den Punkt zu bringen: Die 6021-Control-Unit sendet die Weichen-Kommandos 
nach wie vor und unverändert im alten Format, gleichgültig, auf welches Format 
die Datenübertragung hinsichtlich der Loks eingestellt ist. Davon zu trennen ist 
die Frage, wie und wofür man das neue Format verwenden möchte - etwa in 
Eigenbau-Controllern oder Software-Controllern wie LOK.</I> 
<P>Frage Nr.3:<BR>In welchen Lokdekoder ist das neue Protokoll implementiert, 
sind die Delta-Dekoder kompatibel zum neuen Protokoll?<BR>Antwort:<BR>Alle 
Dekoder mit Zymos-, LME03-, 701.13- and 701.17-Chips sind mit dem neuen 
Protokoll kompatibel. Dies beruht auf der Tatsache, daß sie tatsächlich nur die 
jeweils ersten Pulse der letzten vier Trits bzw. Pulspaare eines Pakets 
auswerten, die die Geschwindigkeits- und Richtungsinformation enthalten (Sie 
erinnern sich daß in dem alten Motorola-Protokoll diese Pulspaare aus jeweils 
zwei identischen Pulsen, zwei langen oder zwei kurzen Pulsen, zusammengesetzt 
sind). Auch der erste Dekodertyp (ohne SMD-Bauteile) arbeitet mit dem neuen 
Format korrekt. Allerdings ist für diese Dekoder für die Änderung der 
Fahrtrichtung ein Paket des alten Protokolls (AABBCCDD=11000000) 
erforderlich.<BR>Neuere Delta-Dekoder und c95-Dekoder haben einen 701.17-Chip 
und alte Delta-Dekoder haben einen 701.13-Chip. Daher verstehen gegenwärtigt nur 
neue neue Delta-, c95- und 6090x- Dekoder die absolute Richtungsinformation 
korrekt (1998 wurden neuen c90-Dekoder mit dem 701.17-Chip 
verkauft).<BR><I>Anmerkung des Übersetzers: Dies ist etwas mißverständlich: Geht 
man von dem "unverfälschten" und "reinen" neuen Format (das aber tatsächlich 
nicht vorkommt) aus, so können nur Dekoder mit dem 701.17, 701.17b oder neuer 
(wie z.B. bei den 60901, 60902 usw. - 701.22/a/b - sowie dem neuen Delta-Dekoder 
mit dem 701.21a) eingesetzt werden, denn im neuen Format wird die Fahrichtung ja 
nicht durch den Befehl "0001" bzw. "11 00 00 00 " umgeschaltet sondern 
inkorporiert im Befehl für Geschwindigkeit und Fahrtrichtung absolut bestimmt. 
Diese in dem jeweils zweiten Puls eines "Trits" bzw. Pulspaars codierte 
Information können die älteren Dekoder nicht verstehen. Daher erkennen sie zwar 
die Geschwindigkeit, die ja in den jeweils ersten Pulsen der "Trits" bzw. 
Pulspaaren enthalten ist, korrekt, können aber die Fahrtichtung nicht ändern. 
Daher sind die älteren Dekoder mit dem unveränderten neuen Format nicht 
kompatibel. Sie erfordern eine Ergänzung des Formats dahingehend, daß - wie von 
Dott.Scorzoni ausgeführt - der Fahrtrichtungsumkehrbefehl "0001" - oder wie von 
Dott.Scorzoni ausführlich mit "AABBCCDD=11000000" bezeichnet - als 
Geschwindigkeitsinformation in ein Paket bzw Doppel-Paket des neuen Formats 
inkorporiert oder zusätzlich ein Paket bzw. Doppelpaket mit dem 
Fahrtrichtungsumkehrbefehl im alten Format eingeschoben wird.</I> 
<P>Frage Nr.4:<BR>Werden zwei Dekoder-Chips benötigt, um 4 Extrafunktionen und 
die Lokgeschwindigkeit zu steuern oder können die neuen Chips beides (wie bei 
den Dekodern der Spur I)?<BR>Antwort:<BR>Ich habe die Frage schon teilweise 
beantwortet. Im neuen Format braucht man nicht zwei Dekoder. Es ist nur eine 
Frage des Platzes (der c95 ist sehr groß). In jedem Fall genügt ein 701.17 und 
wird bei den nächsten Versionen des c90 eingesetzt. Es ist anzunehmen daß der 
nächste c90 wenigstens die Extrafunktionen f1 und f2 aufweisen wird. Im alten 
Protokoll würde dies zwei verschiedene Dekoder erfordern.<BR><I>Anmerkung des 
Übersetzers: Der c95 ist nicht allein wegen der Extrafunktionen so groß. 
Tatsächlich beruht seine unverhältnismäßige Größe im wesentlichen darauf , da er 
sowohl für AC, DC als auch Digital geeignet ist und daher jede Menge Elektronik 
enthält, die allein der Umschaltung zwischen diesen Betriebsarten dient. 
Natürlich spielt auch der höhere Strombedarf der Spur-I- Komponenten eine Rolle. 
Wie man mittlerweile sehen kann, erfordert die Erweiterung von Dekodern mit dem 
701.17 oder 701.17b um zumindest die Extrafunktionen f1 und f2 nur relativ wenig 
Bauteile, die in fast jeder Lok noch Platz finden. Bei den neuen c90-Dekodern - 
besser gesagt den Nachfolgetypen des c90 60901, 60902 usw. - wird der 701.17 
nicht mehr eingesetzt. Tatsächlich handelt es sich um ein wesentlich größeres IC 
mit der Bezeichnung 701.22a/b, das nunmehr auch wesentliche Teile der 
Geschwindkeitsregelung enthält, die Märklin bislang im c90 aufgrund verfehlter 
Produktpolitik nachträglich durch eine zwar intelligente, jedoch verhältnismäßig 
anachronistische analoge Schaltung realisiert hat.</I> 
<P>Frage Nr.5:<BR>Wie ist es mit der alten Central-Unit?<BR>Antwort:<BR>Die alte 
Central-Uni kann die neuen vier Extrafunktionen des c95 nicht 
ansteuern.<BR><I>Anmerkung des Übersetzers: Von den Märklin-Komponenten ist nur 
die 6021- Control-Unit in der Lage, das neue Format zu erzeugen. Allerdings ist 
man auf die Control-Unit nicht angewiesen. Es gibt verschiedene Methoden, selbst 
einen Hardware-Controller zu bauen, der das neue Format erzeugt. Außerdem bieten 
andere Hersteller derartige Controller an - das jüngste ist die Intellibox als 
Kooperation von Modeltreno und Uhlenbrock. Außerdem kann man - wie bei LOK - das 
neue Format auch per Software erzeugen.</I> 
<P>Frage Nr.6:<BR>Wie kann ich neue Extrafunktions-Dekoder und alte 
Funktionsdekoder gleichzeitig/zusammen benutzen?<BR>Antwort:<BR>Indem die 
DIP-Schalter Nr.1 in OFF- und DIP-Schalter Nr.2 in ON-Stellung gebracht werden. 
<P>Frage Nr.7:<BR>Wie kann ich alte und neue Lokdekoder gleichzeitig/zusammen 
benutzen?<BR>Antwort:<BR>Wie bei der vorherigen Antwort: Indem die DIP-Schalter 
Nr.1 in OFF- und DIP-Schalter Nr.2 in ON-Stellung gebracht werden. Dies hat ein 
"gemischtes" Protokoll zur Folge. Bei Fahrtrichtungsänderungen wird das Paket 
zur Fahrtrichtungsumschaltung im alten Motorola- Format ("11000000") gesendet, 
bevor das absolute Richtungskommndo des neuen Formats im "gemischten" Format 
("1E0F0G0H0") gesendet wird. Dadurch können alle Typen von Lokdekodern der 
Anweisung auf Änderung der Fahrtrichtung Folge leisten.<BR>Alle, die ihren 
eigenen Controller bauen wollen, müssen folgendes beherzigen: Wenn der 
Richtungsumschaltbefehl <I>des alten Formats (Anmerkung des Übersetzers)</I> ("0 
0 0 1") gesendet wird und sich zur selben Zeit die absolute Richtungsinformation 
<I>im neuen Format (Anmerkung des Übersetzers)</I> nicht ändert (was bei der 
6021-Control-Unit Unsinn wäre), ändern weder die neuen Dekoder mit dem 
701.17(b)-Chip noch die alten Dekoder (701.13-Chip und älter) ihre 
Fahrtrichtung.<BR><I>Anmerkung des Übersetzers: Wenn man den 
Fahrichtungsumkehr-Befehl "0001" bzw. "11 00 00 00 " in das erste Paket des 
neuen Formats (Geschwindigkeit und Richtung) inkorporiert, genügt es zumindest 
für Dekoder mit dem 701.13, diesen Befehl zusammen mit der neuen 
Richtungsinformation zu senden, also als "1E0F0G0H0". Die oben beschriebene 
Vorgehensweise, zuerst ein Paket im alten Format mit dem 
Fahrtrichtungsumkehrbefehl zu senden, ist also nicht erforderlich. Am saubersten 
erscheint mit jedoch, durch entsprechende Einstellmöglichkeiten dafür zu sorgen, 
daß nur die zu den jeweiligen Dekodern originär passende Formate verwendet 
werden.</I> 
<P>Frage Nr.8:<BR>Hat schon jemand das neue MKL-Format (DIP-Schalter Nr.1 und 
Nr.2 der Control-80f in ON- Stellung) mit einem computergesteuerten Layout und 
vielen aktiven Loks getestet?<BR>Antwort:<BR>Ja, alles funtioniert prima, viel 
besser als mit der alten 6020-Central-Unit, die ja keinen "Refresh"-Zyklus 
besitzt. Ich benutze normalerweise DIGIPET 4.01 nebst dessen Timetable-System. 
Der "Refresh"-Zyklus ist ebenso vorteilhaft, wenn man vergißt, den 
1k5-Widerstand an den abschaltbaren Gleissegmenten vor Signalen zu installieren 
(diese sollen sicherstellen, daß die Loks mit älteren Dekodern, die noch keinen 
701.17(b) besitzen, in der alten Fahrtrichtung weiterfahren).<BR><I>Anmerkung 
des Übersetzers: Dies scheint mir aber ein Trugschluß zu sein. Denn der 
Refresh-Zyklus wiederholt ja nur die "aktuellen" Lokdaten. Bei älteren Dekodern 
bzw. im alten Format wird die Fahrtrichtung aber durch ein internes Flip-Flop 
bestimmt, das durch den Fahrichtungsumkehrbefehl "0001" nur bei dem jeweiligen 
Wechsel der Fahrtrichtung gesetzt bzw. gelöscht wird. "Vergißt" der Dekoder 
mangels 1k5-Widerstand bei einem Halt auf einem spannungslosen Gleisabschnitt 
seinen Fahrtdaten, so vergißt er auch die eingestellte Fahrtrichtung. Allein bei 
Dampfloks, die ja überwiegend in Vorwährtsrichtung fahren, besteht eine große 
Wahrscheinlichkeit, daß die Lok danach in der alten Fahrichtung weiterfahren. 
Bei E- und Dieselloks wird die Wahrscheinlichkeit dafür bei 50% liegen. Daraus 
folgt, daß der Refresh-Zyklus nur im neuen Format und bei Verwendung der neueren 
Dekoder mit dem 701.17(b) oder neuer onboard den 1k5-Widerstand überflüssig 
macht.</I> 
<P>Frage Nr.9:<BR>Hat schon jemand die computergesteuerte Doppel-Traktion im 
neuen Format getestet? Ich vermute, daß einige Probleme auftauchen werden, wenn 
mehr als drei Züge (je mehr destso mehr Probleme) aktiv sind und der Computer 
versuchen wird, viele von diesen zu stoppen. "Parallel"-Betrieb von zu vielen 
Zügen kann ein Problem sein!<BR>Antwort:<BR>Ich vermute, Sie beziehen sich 
hierbei auf eine mögliche Zeitverzögerung zwischen den beiden an einer 
Doppel-Traktion beteiligten Loks. Berücksichtigen Sie bitte, daß jedes Kommando, 
das über das Interface oder ein Control-80 gegeben wird, "unverzüglich" ans 
Gleis gesendet wird. Mit anderen Worten: Der normale "Refresh"-Zyklus der 
Control-Unit wird bei Erhalt eines neuen Kommandos unterbrochen und unmittelbar 
nach dem Ausführen dieses Kommandos fortgesetzt. 
<P>Frage Nr.10:<BR>Welchen Befehl "versteht" ein Lokdekoder tatsächlich, wenn 
sich DIP-Schalter Nr.2 in ON-Stellung befindet? Ist es ein einfaches 
Doppel-Paket oder muß der Dekoder einen kompletten Refresh-Zyklus abwarten, bis 
er seine Einstellung ändert?<BR>Antwort:<BR>Die kürzeste, für einem Dekoder 
verständliche Informationseinheit <I>(Dott.Scorzoni spricht von </I>"atomic" 
component<I>s - Anmerkung des Übersetzers)</I> ist ein Doppel-Paket, nicht aber 
der gesamte Refresh-Block. Dies beruht auf dem Umstand, daß die 
6021-Control-Unit mit den alten Dekoder (mit dem ZyMOS-Chip) und umgekehrt die 
neuen Dekoder mit der allersten 6020-Central-Unit kompatibel sein müssen. In 
einem Selbstbausystem kann nach jedem Doppel-Paket irgendein "Doppel-Paket"-Typ, 
auch mit einer anderen Adresse, gesendet werden. <BR>
<P>Frage Nr.11:<BR>Warum ist im Manual nicht beschrieben, wie das neue Protokoll 
von einem Computer über das Interface gesteuert werden kann? Kann man das 'alte' 
Interface? benutzen<BR>Antwort:<BR>Ja, natürlich, aber das "neue" 6051-Interface 
ist mit Ausnahme des Kabels und der Diskette völlig identisch zu dem 
6050-Interface. 
<P>Frage Nr.12:<BR>Nochmals zum 6050/51-Interface. Ich vermute, daß die 
Geschwindigkeitseinstellung unverändert geblieben ist - aber wie sieht es mit 
dem Fahrtrichtungsumkehrkommando aus? Muß ich noch ein '15'-Befehl senden um die 
Control-Unit anzuweisen, die Fahrtrichtung zu 
ändern?<BR>Antwort:<BR>Unglücklicherweise ja. Das Standard-6050-Protokoll 
enthält keinerlei "absolutes Richtungs"-Kommando.<BR><I>Anmerkung des 
Übersetzers: Die oben bereits erwähnte Intellibox weist eine entsprechende 
Erweiterung des Interface-Protokolls auf.</I> 
<P>Frage Nr.13:<BR>Sie schrieben: "Wenn sich die DIP-Schalter Nr.1 und Nr.2 in 
ON-Stellung befinden, sendet die 6021-Control-Unit aus Gründen der 
Rückwärts-Kompatibilität zusätzlich zu den Daten des neuen Formats einige alte 
Motorola-"0 0 0 1"-Pakete (Fahrtrichtungsumkehr) aus." Aber mein LME03-Dekoder 
ändert nicht die Fahrtrichtung wenn sich beide DIP-Schalter Nr.1 und Nr.2 in 
ON-Stellung befinden. Warum? <BR>Antwort:<BR>Beginnen wir mit einigen 
Definitionen. Märklin produzierte verschiedene Dekodertypen. Wir wollen sie 
anhand der verwendeten Chips benennen.<BR>
<UL>
  <LI>Zy (sowohl als SMD- als auch nicht-SMD-Version)<BR>
  <LI>LME (Lenz Märklin Electronics)<BR>
  <LI>701.13<BR>
  <LI>701.17<BR>
  <LI><I>701.21A (Anmerkung des Übersetzers)<BR></I>
  <LI><I>701.22A (Anmerkung des Übersetzers)<BR></I>
  <LI>...<BR><BR></LI></UL>
<P>Nehmen wir an, daß sich die beiden DIP-Schalter Nr.1 und Nr.2 der 
6021-Control-Unit in ON-Stellung befinden. Die einzelnen Dekoder verhalten sich 
unterschiedlich. Im einzelnen:<BR>
<UL>
  <LI>Zy, 701.13 und 701.17 <I>sowie 701.21A und 701.22A (Anmerkung des 
  Übersetzers)</I> ändern die Fahrtrichtung nach einem "Klick" 
  (Fahrtrichtungsumkehr). 
  <LI>LME ändert die Fahrtrichtung nach einem "Klick" nicht (wie Sie beschrieben 
  haben). </LI></UL>
<P>Nun wollen wir folgendes Experiment machen 
<UL>
  <LI>Wir übernehmen die Kontrolle über den Dekoder; 
  <LI>Wir heben die Lok von den Schienen; 
  <LI>Wir geben mit hochgehobener Lok (!) an der 6021-Control-Unit den Befehl 
  zur Fahrtrichtungsänderung mit einem "Klick" (Fahrtrichtungsänderung); 
  <LI>Wir stellen die Lok wieder auf die Schienen und schauen, was passiert, 
  wenn wir die Geschwindigkeit erhöhen. </LI></UL>
<P>Ergebnis des Experiments:<BR>
<UL>
  <LI>Zy, LME and 701.13 ändern die Fahrtrichtung nicht. 
  <LI>701.17 <I>sowie 701.21A und 701.22A (Anmerkung des Übersetzers)</I> 
  ändert<I>/n</I> die Fahrtrichtung. </LI></UL>
<P>Lösung des Problems:.<BR>Bei DIP-Schalter Nr.1 in OFF-Stellung sendet die 
6021-Control-Unit 6 "normale Fahrtrichtungsumschalt"-Doppel-Pakete im alten 
Motorola-Format und 8 "Fahrtrichtungsumschalt"-Doppel-Pakete des neuen Typs 
(eine Mischung zwischen "Geschwindigkeit = Fahrtrichtungsumkehr" im alten Format 
und "Richtung = EFGH" im neuen Format) aus. Befindet sich DIP-Schalter Nr.1 in 
ON-Stellung sind die "Fahrtrichtungsumkehr"-Pakete nur vom neuen Typ. Die 
Ursache für das unterschiedliche Verhalten (wenn sich DIP- Schalter Nr.1 in 
ON-Stellung befindet) der Zy- und 701.13-Dekoder einerseits und des LME- 
Dekoders andererseits ist, daß der LME-Dekoder beide Bits jedes Trits dekodiert, 
die Zy- und 701.13-Dekoder hingegen nur das jeweils erste Bit jedes Trits 
dekodieren. Daher sind die LME- Dekoder nicht in der Lage, das "Richtungs= 
EFGH"-Paket im neuen Format zu dekodieren. Das könnte wie ein Bug des 
LME-Dekoder aussehen. Tatsächlich ist es aber kein richtiger Bug, denn damals 
war das "neue Motorola-Format" nicht bekannt. Dies ist der Grund, warum Märklin 
rät, den DIP-Schalter Nr.1 bei H0-Modellen in OFF-Stellung zu lassen 
(Rückwärtskompatibilität über alles!!!). 
<P>Frage Nr.14:<BR>Warum reagieren meine Dekoder auf ein 
Extrafunktions-Dekoder-Kommando vom 6050/51- Interface mit einer Verzögerung von 
einigen Sekunden? Warum gibt es keine Verzögerung, wenn ich die Tasten f1...f4 
der 6021-Control-Unit drücke? <BR>Antwort:<BR>Dies beruht auf dem Verhalten der 
6021-Control-Unit bei Erhalt eines Extrafunktions-Dekoders- Befehls vom 
Interface: Die 6021-Control-Unit akzeptiert zwar den Befehl, unterbricht aber 
nicht den Refresh-Zyklus zum Sender der "normalen" 6 Doppel-Pakete wie beim 
Drücken einer der Tasten f1 ... f4 (fragen Sie mich nicht warum). Daher kann es 
im schlimmsten Fall von 80 Loks im Refresh-Zyklus 18,3 Sekunden bis zum 
tatsächlichen Schalten der betreffenden Funktion dauern! <BR><BR><A 
href="http://home.arcor.de/dr.koenig/digital/motoueb.htm#Contents">Zurück zum 
Inhaltsverzeichnis</A> <BR><BR><A 
href="http://spazioinwind.libero.it/scorzoni">Zur Homepage von 
Dott.A.Scorzoni</A> <BR><BR><A href="http://www.modeltreno.it/dig_infi.html">A 
beginner's guide on Digital systems</A> 
<P>
<CENTER><IMG 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/bahn8.gif" 
width="60%" border=0></CENTER>
<P>Diese Übersetzung wurde von Dr. M. Michael König angefertigt. © 1998-2000. 
Korrekturhinweise sind willkommen. 
<P>
<CENTER><IMG 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/bahn8.gif" 
width="60%" border=0></CENTER>
<P>
<CENTER><A 
href="http://home.arcor.de/dr.koenig/digital/digital.htm"><I>Homepage</I></A></CENTER>
<P>
<CENTER><IMG 
src="Dr_ König´s Märklin-Digital-Page Das neue Märklin- Motorola-Format  von Dr_ Michael König (Dr_ König - Dr_ Koenig)  Modelleisenbahn - Märklin (Märklin - Maerklin) - Digital-Dateien/bahn6.gif" 
border=0></CENTER>
<P>
<P><FONT size=3>
<ADDRESS>
<CENTER>© 1998-2000 by Dr. M. Michael König | Antoniter-Weg 11 | 65843 
Sulzbach/Ts. | <A 
href="http://home.arcor.de/dr.koenig/digital/homepag.htm#kontakt">Kontakt</A> | 
Stand: 3.11.2000</CENTER>
<P></P></ADDRESS><FONT size=2><A 
href="http://home.arcor.de/dr.koenig/digital/motoueb.htm">Revisit this page</A> 
</FONT></FONT></FONT></BODY></HTML>
